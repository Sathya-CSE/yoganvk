<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>

    <style>

        
.navbar {
  overflow: hidden;
  background-color: #333;
  font-family: Arial;
}

/* Links inside the navbar */
.navbar a {
  float: left;
  font-size: 16px;
  color: white;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

/* The dropdown container */
.dropdown {
  float: left;
  overflow: hidden;
}

/* Dropdown button */
.dropdown .dropbtn {
  font-size: 16px;
  border: none;
  outline: none;
  color: black;
  padding: 14px 16px;
  background-color: inherit;
  font-family: inherit; /* Important for vertical align on mobile phones */
  margin: 0; /* Important for vertical align on mobile phones */
}

/* Add a red background color to navbar links on hover */
.navbar a:hover, .dropdown:hover .dropbtn {
  background-color: red;
}

/* Dropdown content (hidden by default) */
.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content a {
  float: none;
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
  text-align: left;
}

/* Add a grey background color to dropdown links on hover */
.dropdown-content a:hover {
  background-color: #ddd;
}

/* Show the dropdown menu on hover */
.dropdown:hover .dropdown-content {
  display: block;
}

        #i1{
            margin-left: 65px;
            margin-top: 120px;
        }
        
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        ul {
          background-color: hotpink;
            list-style-type: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0px 5px;
            height: 90px;
            position: fixed; 
            top: -18px; 
            width: 100%;
        }
        li {
            float: right;
        }
        li a {
            text-decoration: none;
            color: black;
            padding: 10px 16px; /* Adjusted padding */
        }
        .search-container {
            display: flex;
            align-items: center;
        }
        input[type="text"] {
            padding: 6px; /* Adjusted padding */
            margin-right: 5px;
        }
        button[type="submit"] {
            padding: 6px; /* Adjusted padding */
        }
        .logo {
            margin-right: 20px; /* Adjusted margin */
        }

        #c{
            margin-top: 150px;

        }


        
        .ft {
            background-color: hotpink;
            color: black;
            text-align: left;
            padding: 30px;
            word-spacing:50px;           
        }

a:hover{
  color: white;
}

        a{
            text-decoration: none;
            color: black;
        }


        pre{
            text-align: match-parent;
            font-size: large;
            font-family: 'Times New Roman', Times, serif;
        }

/* new code added */


        #selected-items {
    margin-top: 150px;
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 5px;
    box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
}

#selected-items h1 {
    font-size: 24px;
    color: #333;
}

#selected-items-content {
    text-align: left;
}

.item {
    border-bottom: 1px solid #ccc;
    padding-bottom: 10px;
    margin-bottom: 10px;
}

.item p {
    margin: 5px 0;
}

.item button {
    background-color: #f44336;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 3px;
    cursor: pointer;
}

.item button:hover {
    background-color: #d32f2f;
}

.quantity-input {
    width: 50px;
    padding: 2px;
    text-align: center;
}

.quantity-label {
    margin-right: 10px;
}

#total-price {
    font-size: 18px; /* Adjusted font size */
    margin-top: 10px; /* Added margin top */
}


    </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
  <a href="/cartpg">
    <ul>
        <li> 
            <div class="navbar"></div>
            <div class="dropdown">
              <button class="dropbtn">Menu
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <a href="/ayyappanpg">Ayyappan Devotional</a>
                <a href="/muruganpg">Murugan Devotional</a>
                <a href="/omsakthipg">Omsakthi Devotional</a>
              </div>
            </div>
          </div></li>
        <li class="logo"><img src="{{ url_for('static', filename='logo.png') }}" alt="NVK" width="150" height="80"></li> <!-- Adjusted logo size -->
        <li class="search-container">
            <input type="text" placeholder="Search.." name="search">
            <button type="submit"><i class="fa fa-search"></i></button>
        </li>
  
        <li><a href="/homepg">Home</a></li>
        <li><a href="/loginpg">Login/Signup</a></li>
        <li><a href="/cartpg">Cart</a></li>
        <li><a href="/aboutpg">About</a></li>    
    </ul>


 <!-- new code added  -->

    <div id="selected-items" style="text-align: center;">
      <h1>Selected Items</h1>
      <div id="selected-items-content"></div>
      <!-- Container for buttons -->
      <p id="total-price"></p>
    <button onclick="clearCart()">Clear Cart</button>
      <div style="margin-top: 50px;">
          <!-- "Buy Now" button -->
          <button onclick="buyNow()">Buy Now</button>
          <!-- "Go to Home Page" button -->
          <button onclick="goToHomePage()">Continue shopping</button>
      </div>
  </div>
  
  
  


<pre>





























</pre>
<div class="ft">
&nbsp;NVK.Â©2025.Copyrights_Received. <a href="/contactpg">Contact_us</a> <a href="/aboutpg">About_us</a>&nbsp;<a href="#"><i class="fa fa-instagram" style="font-size:30px;color:rgb(255, 0, 119)"></i></a>&nbsp;<a href="#"><i class="fa fa-youtube-play" style="font-size:30px;color:red"></i></a>&nbsp;<a href="#"><i class="fa fa-facebook-f" style="font-size:30px;color:rgb(114, 44, 245)"></i></a></div></a>



<script>

document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.querySelector('input[name="search"]');
            const searchButton = document.querySelector('.search-container button');

            function navigateToPage() {
                const query = searchInput.value.toLowerCase().trim();
                if (query === 'ayyappan') {
                    window.location.href = '/ayyappanpg';
                } else if (query === 'murugan') {
                    window.location.href = '/muruganpg';
                } else if (query === 'omsakthi') {
                    window.location.href = '/omsakthipg';
                } else {
                    alert('No page found for the entered keyword');
                }
            }

            searchButton.addEventListener('click', navigateToPage);

            searchInput.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault(); // Prevent form submission
                    navigateToPage();
                }
            });
        });
  // Retrieve items from localStorage
  var selectedItems = JSON.parse(localStorage.getItem("selectedItems"));

  // Function to update the selected items display
  function updateSelectedItems() {
      var selectedItemsContainer = document.getElementById("selected-items-content");
      selectedItemsContainer.innerHTML = "";

      selectedItems.forEach(function(item, index) {
          var itemDiv = document.createElement("div");
          itemDiv.classList.add("item");
          itemDiv.innerHTML = "<p><strong>Name:</strong> " + item.name + "</p>" +
                              "<p><strong>Price:</strong> Rs. " + item.price + "</p>" +
                              "<label class='quantity-label' for='quantity_" + index + "'>Quantity:</label>" +
                              "<input class='quantity-input' type='number' id='quantity_" + index + "' value='" + item.quantity + "' min='1'>" +
                              "<button onclick='removeItem(" + index + ")'>Remove</button>";
          selectedItemsContainer.appendChild(itemDiv);

          // Add event listener to quantity input field
          var quantityInput = itemDiv.querySelector(".quantity-input");
          quantityInput.addEventListener("change", function() {
              var newQuantity = parseInt(this.value);
              selectedItems[index].quantity = newQuantity;
              localStorage.setItem("selectedItems", JSON.stringify(selectedItems));
          }); 
      });
      

      // If there are no items, display a message
      if (selectedItems.length === 0) {
          selectedItemsContainer.innerHTML = "<p>No items selected.</p>";
      }
  }

  // Function to remove an item
  function removeItem(index) {
      selectedItems.splice(index, 1);
      localStorage.setItem("selectedItems", JSON.stringify(selectedItems));
      updateSelectedItems();
  }

  // Check if there are items in the cart
  if (!selectedItems || selectedItems.length === 0) {
      // If no items are present, initialize the array
      selectedItems = [];
  }

  // Update the display
  updateSelectedItems();


  function buyNow() {
  // Retrieve items from localStorage
  var selectedItems = JSON.parse(localStorage.getItem("selectedItems"));

  // Check if there are selected items
  if (selectedItems && selectedItems.length > 0) {
      window.location.href = "/Buypg"; // Redirect to the Buy Now page
  } else {
      alert("No items selected. Please select items before proceeding to Buy Now.");
      // You can perform any other action here, such as displaying a message
  }
}



      function goToHomePage() {
      window.location.href = "/homepg"; // Change the URL as needed
  }

  // Function to calculate total price for each item based on quantity
function calculateItemTotalPrice(item) {
  return item.price * item.quantity;
}

// Function to clear the cart
function clearCart() {
  // Display a confirmation dialog
  var confirmation = confirm("Are you sure you want to clear the cart?");

  // If user confirms, clear the cart
  if (confirmation) {
      // Clear the selectedItems array in localStorage
      localStorage.removeItem("selectedItems");
      // Update the selected items display
      updateSelectedItems();
  }
}
// Function to update the selected items display and calculate total price
function updateSelectedItems() {
  var selectedItemsContainer = document.getElementById("selected-items-content");
  selectedItemsContainer.innerHTML = "";

  var totalPrice = 0;

  // Retrieve items from localStorage
  var selectedItems = JSON.parse(localStorage.getItem("selectedItems"));

  if (!selectedItems || selectedItems.length === 0) {
      // If no items are present, display a message
      selectedItemsContainer.innerHTML = "<p>No items selected.</p>";
  } else {
      // Loop through each selected item
      selectedItems.forEach(function(item, index) {
          var itemTotalPrice = calculateItemTotalPrice(item);
          totalPrice += itemTotalPrice;

          var itemDiv = document.createElement("div");
          itemDiv.classList.add("item");
          itemDiv.innerHTML = "<p><strong>Name:</strong> " + item.name + "</p>" +
                              "<p><strong>Price:</strong> Rs. " + item.price + "</p>" +
                              "<label class='quantity-label' for='quantity_" + index + "'>Quantity:</label>" +
                              "<input class='quantity-input' type='number' id='quantity_" + index + "' value='" + item.quantity + "' min='1'>" +
                              "<p><strong>Total:</strong> Rs. " + itemTotalPrice.toFixed(2) + "</p>" +
                              "<button onclick='removeItem(" + index + ")'>Remove</button>";
          selectedItemsContainer.appendChild(itemDiv);

          // Add event listener to quantity input field
          var quantityInput = itemDiv.querySelector(".quantity-input");
          quantityInput.addEventListener("change", function() {
              var newQuantity = parseInt(this.value);
              selectedItems[index].quantity = newQuantity;
              localStorage.setItem("selectedItems", JSON.stringify(selectedItems));
              updateSelectedItems(); // Update the display after changing quantity
          });
      });
  }

  // Update total price display
  document.getElementById("total-price").textContent = "Total Price: Rs. " + totalPrice.toFixed(2);
}

</script>



</body>
</html>